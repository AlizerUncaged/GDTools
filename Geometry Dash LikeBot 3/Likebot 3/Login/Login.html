<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap"
        rel="stylesheet">

    <link rel="icon" href="/Resources/Logo.ico?v=1">

    <link rel="stylesheet" href="/Resources/Main.css">
    <title>GDL3 - Login</title>
</head>

<body>
    <nav class="navbar navbar-light bg-dark">
        <div class="container">
            <a class="navbar-brand force-white" href="#">
                <img src="/Resources/Logo.png" alt="" height="25" class="me-2 d-inline-block align-text-top">
                <b> Likebot 3</b>
            </a>
        </div>
    </nav>
    <div class="container mt-4">
        <div class="row mt-4">
            <div class="text-center">
                <img src="/Resources/GD.png" class="mx-auto d-blockd-block mb-2" height="100px">
                <script>

                    function setCookie(name, value, days) {
                        var expires = "";
                        if (days) {
                            var date = new Date();
                            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                            expires = "; expires=" + date.toUTCString();
                        }
                        document.cookie = name + "=" + (value || "") + expires + "; path=/";
                    }

                    function makeRequest(method, url) {
                        return new Promise(function (resolve, reject) {
                            let xhr = new XMLHttpRequest();
                            xhr.open(method, url);
                            xhr.onload = function () {
                                if (this.status >= 200 && this.status < 300) {

                                    const objr = JSON.parse(xhr.response);

                                    document.getElementById("checking-gd-message").innerText = objr["Message"];
                                    document.getElementById("spinner-l").classList.remove("spinner-border");
                                    document.getElementById("spinner-l").classList.remove("text-light");
                                    document.getElementById("spinner-l").classList.add("spinner-grow");

                                    // store session cookie
                                    if (objr["IsSuccess"]) {
                                        setCookie("SessionsKey", objr["SessionsKey"], 30);
                                        document.getElementById("spinner-l").classList.add("text-success");

                                        // redirect
                                    }
                                    else {
                                        document.getElementById("spinner-l").classList.add("text-danger");
                                        document.getElementById("username").disabled = false;
                                        document.getElementById("password").disabled = false;
                                        isChecking = false;
                                    }
                                } else {

                                }
                            };
                            xhr.onerror = function () {

                            };
                            xhr.send();
                        });
                    }

                    let isChecking = false;
                    function isEmpty(str) {
                        return !str.trim().length;
                    }

                    function checkAccount() {

                        document.getElementById("spinner-l").classList.remove("text-danger");
                        document.getElementById("spinner-l").classList.remove("spinner-grow");
                        document.getElementById("spinner-l").classList.add("text-light");
                        document.getElementById("spinner-l").classList.add("spinner-border");
                        document.getElementById("checking-gd-message").innerText = "Checking your Geometry Dash account.";

                        let usernameVal = document.getElementById("username").value;
                        let passwordVal = document.getElementById("password").value;
                        if (isEmpty(usernameVal)) return;
                        if (isEmpty(passwordVal)) return;
                        if (isChecking) return; isChecking = true;

                        document.getElementById("loader").style.height = "100px";
                        document.getElementById("username").disabled = true;
                        document.getElementById("password").disabled = true;

                        // wait for this
                        makeRequest("GET", "/check?username=" + usernameVal + "&password=" + passwordVal);
                    }
                </script>
                <form action="/">
                    <p>Please log in your <b>Geometry Dash</b> account, make sure it's an <b>alt</b>.</p>
                    <div>
                        <input name="username" id="username" type="text" class="form-control mb-3"
                            placeholder="Username">
                        <input name="password" id="password" type="password" class="form-control mb-3"
                            placeholder="Password">
                        <button onclick="checkAccount()" type="button" style="width:100%" class="btn btn-primary mb-4">
                            <b>Log In</b>
                        </button>
                        <div id="loader" class="row justify-content-md-center" style="height: 0px; overflow: hidden;">
                            <div class="row row-cols-auto">
                                <div class="col">
                                    <div id="spinner-l" class="spinner-border text-light" role="status">
                                    </div>
                                </div>
                                <div class="col" id="checking-gd-message">Checking your GD account, this might take a
                                    while.</div>
                            </div>
                        </div>
                    </div>
                </form>
                <img src="/Resources/KannaChan.png" alt="Cute">
            </div>
            <div class="mb-4">
                <b>
                    <h2>Welcome to Likebot 3!</h2>
                </b>
                <p>
                    Likebot 3 is a like and dislike exchange site which directly uses exposed Geometry Dash APIs.
                </p>
                <b>How does this work? </b><br>
                The account you logged in will be used for likebotting other people's levels, comments and posts while
                you get to have your levels, comments and posts liked by other people's accounts logged in here too!
                <br><br>
                <b>Will my account get banned?</b><br>
                Accounts logged in usually get banned in 2 days, so please, use an <b>alt</b>.
                <br><br>
                <b>What happens when my account gets banned?</b> <br>
                You need to create a new account again to use Likebot 3.
                <br><br>
                <b>Can I trust this site?</b> <br>
                Yep, your accounts are never shared nor used, only for liking items. Still not sure? Just use an
                <b>alt</b> account for logging in and see for yourself.
                <br><br>
                <b>Can I use more accounts than just 1?</b><br>
                Yes! Each accounts can do a maximum of 250 likes and dislikes.
                <br><br>
                <b>What is the best programming language?</b><br>
                C# of course. C# is superior to all languages there is.
                <br><br>
                <div class="col rounded shadowed p-2 console">
                    <b>Current Max Limit Per Account: </b> 250 Likes/Dislikes
                </div>
            </div>

        </div>
    </div>
</body>

</html>